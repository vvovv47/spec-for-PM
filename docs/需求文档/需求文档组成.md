# 一、完整需求文档的「两级核心结构」
整个最终版需求文档，只有两大模块，边界100%清晰，无交叉、无冗余：
1.  **全局通用模块**：整个产品通用、所有功能都必须遵守的规则，只写1次，彻底避免重复冗余
2.  **拆分后的独立功能单元模块**：你拆解的每一个`REQ-XXX`单元，和这个功能强相关的所有内容（功能、交互、视觉、专属非功能要求），全部放在这里，一个单元管一个功能，互不交叉、完全独立

---

# 二、每个部分的严格定义、对应内容、必填规则
## 第一部分：全局通用模块（文档开头固定，全产品唯一）
### 1. 文档基础信息（必填）
- **严格对应内容**：产品名称、文档版本号、最后更新日期、编写人、适用范围
- **核心作用**：版本管理，避免多人协作/长期迭代时出现版本混乱
- **示例**：
  > 产品名称：桌面端AI划词助手
  > 文档版本：V1.0
  > 更新日期：2026.02.20
  > 编写人：AI产品经理
  > 适用范围：产品V1.0版本全功能需求定义、开发、验收

### 2. 产品核心概述（必填，全产品的定调基准）
- **严格对应内容**：
  1.  核心诉求/产品目标：这个产品要解决什么核心痛点，最终要达成什么效果
  2.  目标使用主体：产品的直接使用者、服务对象
  3.  核心使用场景：用户在什么具体场景下，会使用这个产品
  4.  预期核心效果：产品上线后，要达成的可感知、可验证的核心结果
- **核心作用**：给整个需求定边界，所有功能都不能偏离这个核心，避免跑偏

### 3. 全局通用规则（必填，全产品统一遵守）
- **严格对应内容**：所有功能都必须遵守的、通用的业务/交互规则，只写1次，单个功能单元里不再重复
  1.  权限规则：比如「所有功能无需登录即可使用」「管理员可配置全局规则」
  2.  内容规则：比如「AI所有输出内容必须合规，不得生成违规信息」「所有引用内容必须标注来源」
  3.  通用交互规则：比如「所有弹窗点击外部区域即可关闭」「所有可点击元素必须有hover反馈」
- **核心作用**：避免每个功能单元重复写通用规则，减少冗余，保证全产品体验统一

### 4. 全局非功能要求（必填，全产品的底线标准）
- **严格对应内容**：所有功能都必须满足的、通用的质量标准，只写1次，单个功能单元里只写专属的更高要求，不重复
  1.  全局安全要求：比如「所有用户数据本地存储，不上传云端，不收集用户隐私信息」
  2.  全局兼容性要求：比如「必须支持Windows 10+、macOS 12+系统」
  3.  全局可用性要求：比如「产品全年可用率≥99.9%」
  4.  全局性能底线：比如「所有操作无肉眼可见卡顿，后台常驻CPU占用≤10%」
- **核心作用**：定义整个产品的底线，所有功能都必须遵守，无需重复说明

### 5. 全局视觉规范（选填，全产品的设计统一标准）
- **严格对应内容**：所有界面都必须遵守的视觉规则，只写1次，单个功能单元里只写专属样式，不重复
  1.  设计风格：比如「极简现代风、暗黑模式优先、轻拟物质感」
  2.  色彩规范：主色、辅助色、文字色、背景色的色值
  3.  字体规范：默认字体、字号层级、字重规则
  4.  动效规范：通用过渡动画的时长、缓动效果
- **核心作用**：保证全产品视觉统一，避免每个功能重复写基础样式

### 6. 名词解释（选填）
- **严格对应内容**：文档里的专业术语、自定义名词的清晰解释，比如「划词触发」「Agent节点」「工具调用」的定义
- **核心作用**：彻底消除歧义，不管是开发、测试，还是你自己长期迭代回头看，都能精准理解

---

## 第二部分：核心独立功能单元模块（你拆解的每一个REQ-XXX，全文档核心）
这是你需求文档的主体，**每一个你拆解的独立功能，都必须严格按照下面的固定结构编写**。
所有和这个功能强相关的内容，全部放在这个单元里，不拆分到文档其他地方，和其他功能单元完全独立、互不交叉。

```
【需求单元ID：REQ-XXX】（按拆解顺序编号，全文档唯一标识）
```

### 1. 需求名称（必填）
- **严格对应内容**：1句话清晰定义这个功能，主谓宾完整，明确「谁，在什么场景下，要实现什么核心功能」，无任何歧义
- **错误示例**：划词功能
- **正确示例**：桌面端全界面文本选中与快捷键触发监听功能

### 2. 触发条件（必填）
- **严格对应内容**：这个功能被启动/触发的**唯一、明确、无歧义的前提**，必须包含：触发主体、触发动作、触发场景、前置条件，禁止模糊表述
- **正确示例**：用户在桌面端任意界面，用鼠标选中≥2个字符的文本内容，按下用户预设的触发快捷键

### 3. 核心功能行为（必填，对应「功能性需求」核心）
- **严格对应内容**：这个功能要完成的**核心动作、完整流程、输入与输出**，只明确「要做什么」，绝对不涉及「技术怎么实现」，清晰定义用户能通过这个功能完成什么事，系统要执行什么操作
- **正确示例**：助手在后台持续监听系统全局的文本选中事件与快捷键按下事件，校验选中文本字符数≥2后，精准捕获用户选中的文本内容，发送指令启动弹窗渲染流程

### 4. 边界与不包含内容（必填，划清绝对边界）
- **严格对应内容**：明确这个功能**绝对不做、不包含**的内容，彻底避免和其他功能单元耦合，避免开发理解跑偏
- **正确示例**：本单元仅负责文本选中监听、快捷键监听、文本内容捕获，不负责弹窗内的内容生成、释义查询、翻译等其他功能

### 5. 交互与业务规则（必填，对应功能的行为逻辑）
- **严格对应内容**：
  1.  正常交互流程：用户操作的完整步骤，以及每一步对应的系统反馈
  2.  异常处理规则：所有可能的异常场景，以及对应的处理方式（比如无选中文本、快捷键冲突、无网络时的处理）
  3.  专属业务规则：这个功能独有的、全局规则里未提及的规则（全局写过的这里绝对不重复）
- **正确示例**：
  > 正常流程：快捷键按下后，立即在选中文本附近渲染悬浮弹窗
  > 异常规则：若选中文本为空，不触发弹窗、无任何反馈；若快捷键冲突，仅弹出1次提示引导用户修改
  > 专属规则：同一时间只能触发1个弹窗，新的触发会自动关闭旧弹窗

### 6. 界面与视觉要求（对应「前端/美术需求」，功能专属）
- **严格对应内容**：这个功能专属的界面布局、样式、视觉效果、动效，全局视觉规范里写过的这里绝对不重复，只写这个功能独有的内容
- **正确示例**：
  > 弹窗位置：悬浮在选中文本的右上方，距离文本10px
  > 弹窗尺寸：固定宽度320px，高度自适应内容，最大高度400px，超出部分可滚动
  > 视觉样式：圆角8px，轻微投影，背景色#FFFFFF，自动适配暗黑模式
  > 动效：淡入淡出过渡动画，时长150ms

### 7. 质量与性能要求（对应「非功能性需求」，功能专属）
- **严格对应内容**：这个功能专属的、可量化、可验收的质量标准，全局非功能要求里写过的这里绝对不重复，只写这个功能独有的、更高的要求
- **正确示例**：
  > 响应性能：快捷键按下到弹窗完全渲染完成，耗时≤200ms
  > 稳定性：连续触发100次，漏触发率≤0%，无崩溃、无闪退
  > 资源占用：触发后CPU占用峰值≤5%，无内存泄漏


