---
name: "交互与业务规则"
description: "为功能单元补充交互与业务规则，包括正常流程、异常处理、专属业务规则。当用户明确需要交互与业务逻辑时调用。"
---

# 交互与业务规则

## 核心目标

为功能单元补充完整的交互与业务规则，明确功能的行为逻辑，包括正常交互流程、异常处理规则、专属业务规则。

## 触发时机

当用户明确需要交互与业务逻辑时调用。

## 输出方式

### 方式一：全量补充
为 `docs/需求文档/需求文档.md` 中的所有功能单元添加交互与业务规则。

### 方式二：定向补充
仅为用户明确指定的功能单元添加交互与业务规则。

## 强制输出结构

### 5. 交互与业务规则（必填，对应功能的行为逻辑）

- **严格对应内容**：
  1. **正常交互流程**：用户操作的完整步骤，以及每一步对应的系统反馈
  2. **异常处理规则**：所有可能的异常场景，以及对应的处理方式（比如无选中文本、快捷键冲突、无网络时的处理）
  3. **专属业务规则**：这个功能独有的、全局规则里未提及的规则（全局写过的这里绝对不重复）

- **正确示例**：
  > 正常流程：快捷键按下后，立即在选中文本附近渲染悬浮弹窗
  > 异常规则：若选中文本为空，不触发弹窗、无任何反馈；若快捷键冲突，仅弹出1次提示引导用户修改
  > 专属规则：同一时间只能触发1个弹窗，新的触发会自动关闭旧弹窗

## 执行规则

1. **基于现有需求** — 必须基于 `docs/需求文档/需求文档.md` 中已有的功能单元进行补充
2. **一对一补充** — 每个功能单元独立补充，不交叉、不耦合
3. **不新增功能** — 仅补充交互与业务规则，不新增或修改功能定义
4. **明确可验证** — 所有规则必须明确、可验证，禁止模糊表述

## 输出要求

1. **聊天框输出**：只输出简化确认信息
   - 已补充的功能单元数量
   - 各功能单元的交互规则要点（1-2句话）
2. **完整内容保存**：将所有功能单元的交互与业务规则补充到 `docs/需求文档/需求文档.md` 文件中，作为每个功能单元的第5项内容

## 文件保存格式

在 `docs/需求文档/需求文档.md` 中，为每个功能单元添加以下内容：

```
### 5. 交互与业务规则

**正常交互流程**：
[用户操作的完整步骤及系统反馈]

**异常处理规则**：
- [异常场景1]：[处理方式]
- [异常场景2]：[处理方式]

**专属业务规则**：
- [专属规则1]
- [专属规则2]
```

## 禁止事项

- 禁止修改功能单元已有的需求名称、触发条件、核心功能行为、边界约束
- 禁止新增功能单元
- 禁止输出优先级、可行性判断等非交互规则内容
